# Achievement Definitions
# Each achievement specifies a condition that, when met, triggers a Discord notification.
#
# Condition Types:
#   - absolute: Value must be >, <, >=, <=, or == threshold
#   - personal_max: Value is a new personal maximum for the player
#   - personal_min: Value is a new personal minimum for the player
#   - population_percentile: Value is in the top/bottom X% of all players
#   - player_percentile: Value is in the top/bottom X% of the player's own games
#
# Duration Normalization:
#   - By default, stats are normalized to a 30-minute game baseline (normalize_by_duration: true)
#   - This ensures fair comparisons across games of different lengths
#   - Example: 15 kills in a 45-minute game = (15 / 2700) * 1800 = 10 kills normalized
#   - Set normalize_by_duration: false for stats that shouldn't be normalized (e.g., win, deaths in perfect game)

achievements:
  # Absolute threshold achievements
  - id: high_kills
    name: "Killing Spree"
    description: "Get 10 or more kills in a 30-minute equivalent game"
    stat_field: kills
    condition_type: absolute
    operator: ">="
    threshold: 10
    normalize_by_duration: true  # Normalize to 30-minute baseline
    message_template: "ðŸŽ¯ **{player_name}** achieved **{achievement_name}**! They got {value:.1f} kills in their last game!"

  - id: perfect_game
    name: "Perfect Game"
    description: "Finish a game with 0 deaths"
    stat_field: deaths
    condition_type: absolute
    operator: "=="
    threshold: 0
    normalize_by_duration: false  # Don't normalize - we want exactly 0 deaths
    message_template: "ðŸ˜‡ **{player_name}** had a **{achievement_name}**! Zero deaths in their last game!"

  - id: assist_king
    name: "Assist King"
    description: "Get 20 or more assists in a 30-minute equivalent game"
    stat_field: assists
    condition_type: absolute
    operator: ">="
    threshold: 20
    normalize_by_duration: true
    message_template: "ðŸ¤ **{player_name}** is the **{achievement_name}**! They got {value:.1f} assists!"

  - id: cs_master
    name: "CS Master"
    description: "Get 300 or more CS in a 30-minute equivalent game"
    stat_field: total_minions_killed
    condition_type: absolute
    operator: ">="
    threshold: 300
    normalize_by_duration: true
    message_template: "ðŸŒ¾ **{player_name}** is a **{achievement_name}**! They farmed {value:.0f} minions!"

  - id: high_damage
    name: "Damage Dealer"
    description: "Deal 50000 or more damage to champions in a 30-minute equivalent game"
    stat_field: total_damage_dealt_to_champions
    condition_type: absolute
    operator: ">="
    threshold: 50000
    normalize_by_duration: true
    message_template: "ðŸ’¥ **{player_name}** is a **{achievement_name}**! They dealt {value:,.0f} damage to champions!"

  - id: vision_master
    name: "Vision Master"
    description: "Place 30 or more wards in a 30-minute equivalent game"
    stat_field: wards_placed
    condition_type: absolute
    operator: ">="
    threshold: 30
    normalize_by_duration: true
    message_template: "ðŸ‘ï¸ **{player_name}** is a **{achievement_name}**! They placed {value:.0f} wards!"

  # Personal record achievements
  - id: new_kill_record
    name: "New Kill Record"
    description: "Set a new personal kill record (normalized to 30-minute games)"
    stat_field: kills
    condition_type: personal_max
    normalize_by_duration: true
    message_template: "ðŸ† **{player_name}** set a **{achievement_name}**! New personal best: {value:.1f} kills! (Previous: {previous_value:.1f})"

  - id: new_assist_record
    name: "New Assist Record"
    description: "Set a new personal assist record (normalized to 30-minute games)"
    stat_field: assists
    condition_type: personal_max
    normalize_by_duration: true
    message_template: "ðŸ† **{player_name}** set a **{achievement_name}**! New personal best: {value:.1f} assists! (Previous: {previous_value:.1f})"

  - id: new_cs_record
    name: "New CS Record"
    description: "Set a new personal CS record (normalized to 30-minute games)"
    stat_field: total_minions_killed
    condition_type: personal_max
    normalize_by_duration: true
    message_template: "ðŸ† **{player_name}** set a **{achievement_name}**! New personal best: {value:.0f} CS! (Previous: {previous_value:.0f})"

  - id: new_damage_record
    name: "New Damage Record"
    description: "Set a new personal damage record (normalized to 30-minute games)"
    stat_field: total_damage_dealt_to_champions
    condition_type: personal_max
    normalize_by_duration: true
    message_template: "ðŸ† **{player_name}** set a **{achievement_name}**! New personal best: {value:,.0f} damage! (Previous: {previous_value:,.0f})"

  # Negative records (personal_min - lower is "better" for these stats)
  - id: fewest_deaths
    name: "Survival Expert"
    description: "New personal minimum deaths (excluding 0, normalized to 30-minute games)"
    stat_field: deaths
    condition_type: personal_min
    min_value: 1  # Exclude perfect games (0 deaths)
    normalize_by_duration: true
    message_template: "ðŸ›¡ï¸ **{player_name}** achieved **{achievement_name}**! Only {value:.1f} deaths! (Previous best: {previous_value:.1f})"

  # Population percentile achievements
  - id: top_killer
    name: "Top Killer"
    description: "Kills in the top 5% of all players (normalized to 30-minute games)"
    stat_field: kills
    condition_type: population_percentile
    percentile: 95  # Top 5% = 95th percentile
    direction: high  # Higher is better
    normalize_by_duration: true
    message_template: "ðŸŒŸ **{player_name}** achieved **{achievement_name}**! {value:.1f} kills puts them in the top 5% of all players!"

  - id: elite_damage
    name: "Elite Damage"
    description: "Damage dealt in the top 10% of all players (normalized to 30-minute games)"
    stat_field: total_damage_dealt_to_champions
    condition_type: population_percentile
    percentile: 90  # Top 10% = 90th percentile
    direction: high
    normalize_by_duration: true
    message_template: "ðŸŒŸ **{player_name}** dealt **Elite Damage**! {value:,.0f} damage puts them in the top 10% of all players!"

  # Player percentile achievements (compared to own history)
  - id: personal_best_game
    name: "Personal Best Game"
    description: "KDA in the top 10% of your own games"
    stat_field: kda
    condition_type: player_percentile
    percentile: 90  # Top 10% of own games
    direction: high
    normalize_by_duration: false  # KDA is already a ratio, don't normalize
    message_template: "â­ **{player_name}** had a **{achievement_name}**! KDA of {value:.2f} is in the top 10% of their games!"

  - id: personal_worst_deaths
    name: "Rough Game"
    description: "Deaths in the bottom 10% of your games (most deaths, normalized to 30-minute games)"
    stat_field: deaths
    condition_type: player_percentile
    percentile: 90  # 90th percentile of deaths = worst 10%
    direction: high  # High deaths is "achieving" this
    normalize_by_duration: true
    message_template: "ðŸ’€ **{player_name}** had a **{achievement_name}**... {value:.1f} deaths is in their worst 10% of games."

  # Consecutive achievements (win streaks, etc.)
  - id: triple_win_streak
    name: "Triple Win Streak"
    description: "Win 3 games in a row"
    stat_field: win
    condition_type: consecutive
    operator: "=="
    threshold: 1  # win is a boolean, 1 = True
    consecutive_count: 3
    normalize_by_duration: false  # Boolean value, don't normalize
    message_template: "ðŸ”¥ **{player_name}** achieved **{achievement_name}**! 3 wins in a row!"

  - id: five_win_streak
    name: "Pentakill Streak"
    description: "Win 5 games in a row"
    stat_field: win
    condition_type: consecutive
    operator: "=="
    threshold: 1
    consecutive_count: 5
    normalize_by_duration: false  # Boolean value, don't normalize
    message_template: "ðŸ”¥ðŸ”¥ **{player_name}** achieved **{achievement_name}**! 5 wins in a row! Unstoppable!"

  - id: seven_win_streak
    name: "Legendary Streak"
    description: "Win 7 games in a row"
    stat_field: win
    condition_type: consecutive
    operator: "=="
    threshold: 1
    consecutive_count: 7
    normalize_by_duration: false  # Boolean value, don't normalize
    message_template: "ðŸ”¥ðŸ”¥ðŸ”¥ **{player_name}** achieved **{achievement_name}**! 7 wins in a row! LEGENDARY!"

  - id: perfect_kda_streak
    name: "Perfect KDA Streak"
    description: "Get KDA >= 5 for 3 games in a row"
    stat_field: kda
    condition_type: consecutive
    operator: ">="
    threshold: 5.0
    consecutive_count: 3
    normalize_by_duration: false  # KDA is already a ratio, don't normalize
    message_template: "â­ **{player_name}** achieved **{achievement_name}**! KDA >= 5.0 for 3 games straight!"
